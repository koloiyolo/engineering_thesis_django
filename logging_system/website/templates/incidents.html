{% extends 'base.html' %} {% block content %}
<div class="col-md-12">
    {% if incidents %}
    <div class="input-group mb-3">
        <a class="btn btn-secondary" href="{% url 'home' %}">&laquo; Back</a>
        <a class="btn btn-outline-dark disabled" > Create analysis </a>
        <a class="btn btn-dark">Today</a>
        <a class="btn btn-dark">Last Week</a>
        <a class="btn btn-dark">Last Month</a>
        <a class="btn btn-dark">Last Year</a>
    </div>
    <div class="accordion" id="accordionServices">
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed">
                    <div class="container text-start">
                        <div class="row">
                            <div class="col-2">Date:</div>
                            <div class="col-1">Time:</div>
                            <div class="col-2">System name:</div>
                            <div class="col-2">Tag:</div>
                            <div class="col-5">Title:</div>
                        </div>
                    </div>
                </button>
            </h2>
        </div>
        {% for obj in incidents %}
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading{{ obj.id }}">
                <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapse{{ obj.id }}"
                    aria-expanded="false"
                    >
                    <div class="container text-start">
                        <div class="row">
                            <div class="col-2">{{ obj.date }}</div>
                            <div class="col-1">{{ obj.time }}</div>
                            <div class="col-2">{{ obj.system.name }}</div>
                            <div class="col-2">{{ obj.get_tag_display }}</div>
                            <div class="col-5">{{ obj.title }}</div>
                        </div>
                    </div>
                </button>
            </h2>
            <div
                id="collapse{{ obj.id }}"
                class="accordion-collapse collapse"
                data-bs-parent="#accordionServices"
                >
                <div class="accordion-body">
                    <div id="ping-plot">{{ obj.graph|safe }}</div>
                    <div class="btn-group" role="group">
                        <a href="{% url 'incidents:view' obj.id %}" class="btn btn-primary">
                        View
                        </a>
                        <a href="{% url 'incidents:remove' obj.id %}" class="btn btn-danger"
                            >Remove</a
                            >
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    <br />
    <nav>
        <ul class="pagination">
            {% if incidents.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page=1" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{ incidents.previous_page_number }}"
                    >Previous</a
                    >
            </li>
            {% endif %}
            <li class="page-item disabled">
                <a class="page-link" href="#"
                    >{{ incidents.number }} of {{ incidents.paginator.num_pages }}</a
                    >
            </li>
            {% if incidents.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ incidents.next_page_number }}"
                    >Next</a
                    >
            </li>
            <li class="page-item">
                <a
                    class="page-link"
                    href="?page={{ incidents.paginator.num_pages }}"
                    aria-label="Next"
                    >
                <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% else %}
    <br />
    <h3>No incidents reported yet ;)</h3>
    <br />
    {% endif %}
</div>
{% endblock %}